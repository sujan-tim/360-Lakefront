generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Booking {
  id                     String        @id @default(cuid())
  roomSlug               String
  checkIn                DateTime
  checkOut               DateTime
  nights                 Int           @default(1)
  adults                 Int
  children               Int
  name                   String
  email                  String
  phone                  String
  notes                  String?
  currency               String        @default("USD")
  totalAmountCents       Int
  exchangeRateNprPerUsd  Int           @default(145)
  totalAmountNpr         Int           @default(0)
  totalAmountNprBase     Int           @default(0)
  discountNpr            Int           @default(0)
  paymentStatus          String        @default("PENDING")
  paymentProvider        String?
  paymentReference       String?
  stripeCheckoutSessionId String?       @unique
  createdAt              DateTime       @default(now())
  updatedAt              DateTime       @updatedAt

  @@index([roomSlug, checkIn, checkOut])
}

model Feedback {
  id        String   @id @default(cuid())
  name      String
  rating    Int
  message   String
  createdAt DateTime @default(now())
}
